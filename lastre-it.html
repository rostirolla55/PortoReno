<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" content="notranslate">
    
    <title>Numerazione dei civici</title>

    <link rel="stylesheet" href="public/style.css">

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-28GJXYWCQW"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      // üî• CONFIGURAZIONE: Associa 'dimension1' al nome parametro 'lingua_pagina'
      gtag('config', 'G-28GJXYWCQW', {
          'custom_map': {'dimension1': 'lingua_pagina'} 
      });
    </script>

    <script>
        // Funzione helper per ottenere il nome del file di destinazione (coerente con la nuova struttura)
        function getDestinationPageName(pageId, langCode) {
            // Es. ('index', 'en') -> index-en.html
            // Es. ('pugliole', 'it') -> pugliole-it.html
            return `${pageId}-${langCode}.html`;
        }

        // üñ±Ô∏è CAMBIO MANUALE LINGUA (Chiamato dai pulsanti bandiera)
        function setLanguage(langCode) {
            // 1. Salva la lingua scelta dall'utente (Requisito 11)
            localStorage.setItem('userLanguage', langCode);

            // 2. Determina l'ID base della pagina corrente (es. 'index', 'pugliole')
            const path = window.location.pathname;
            let pageId = path.substring(path.lastIndexOf('/') + 1).replace(/-[a-z]{2}\.html/i, '').replace('.html', '').toLowerCase();
            if (pageId === '') pageId = 'index';

            // 3. Reindirizza alla pagina HTML corretta (es. pugliole-en.html)
            const destinationPage = getDestinationPageName(pageId, langCode);
            window.location.href = destinationPage;
        }
    </script>
</head>

<body id="lastre">

<div class="header-image-container">
    <img id="headerImage" src="public/images/lastre_header.jpg" alt="Immagine di testata per la pagina Lastre"> 
    <h1 class="header-title" id="pageTitle">Lastre</h1>
</div>
    <header class="main-header">
        <nav class="main-nav">
            <button class="menu-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
            <ul class="nav-list" id="navList">
                <li><a id="navHome" href="index.html"></a></li>
                <li><a id="navAneddoti" href="aneddoti.html"></a></li>
                <li><a id="navLastre" href="lastre.html"></a></li><!--  -->
                <li><a id="navPugliole" href="pugliole.html"></a></li>
            </ul>
        </nav>
    </header>

    <header id="home-header">
        <h1 class="page-title" id="pageTitle"></h1>
    </header>
    <p id="mainText">Applicazione in errore per la lingua it ...</p>
    <p id="mainText1"></p>
    <p id="mainText2"></p>
    <p id="mainText3"></p>
    <figure class="center-image-block">
        <img id="pageImage1" src="" alt="Immagine della lastra in arenaria" class="responsive-image">
        <figcaption id="mainText4"></figcaption>
    </figure>
    <p id="mainText5"></p>
    <img id="pageImage2" src="" style="display:none;">
    <img id="pageImage3" src="" style="display:none;">
    <img id="pageImage4" src="" style="display:none;">
    <img id="pageImage5" src="" style="display:none;">
    <button id="playAudio">Ascolta l'audio in italiano!</button>

    <audio id="audioPlayer"></audio>
    <p>
    <p>

    </p>
    <div class="language-selector">
        <button onclick="setLanguage('it')">
            <img src="public/flag/it.png" alt="Italiano">
        </button>
        <button onclick="setLanguage('en')">
            <img src="public/flag/en.png" alt="English">
        </button>
        <button onclick="setLanguage('fr')">
            <img src="public/flag/fr.png" alt="Fran√ßais">
        </button>
        <button onclick="setLanguage('es')">
            <img src="public/flag/es.png" alt="Espa√±ol">
        </button>
    </div>

    <script src="public/main.js"></script>
</body>


</html>