<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" content="notranslate">

    <title>Le Pugliole a Bologna</title>

    <link rel="stylesheet" href="public/style.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-28GJXYWCQW"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        // üî• CONFIGURAZIONE: Associa 'dimension1' al nome parametro 'lingua_pagina'
        gtag('config', 'G-28GJXYWCQW', {
            'custom_map': { 'dimension1': 'lingua_pagina' }
        });
    </script>

    <script>
        // Rimuoviamo qui la definizione di getDestinationPageName e redirectToPage.
        // Queste funzioni DEVONO essere definite SOLTANTO in public/main.js

        // üñ±Ô∏è CAMBIO MANUALE LINGUA (Chiamato dai pulsanti bandiera)
        function setLanguage(langCode) {
            // 1. Salva la lingua scelta dall'utente (Requisito 11)
            localStorage.setItem('userLanguage', langCode);

            // 2. Determina l'ID base della pagina corrente (es. 'index', 'pugliole')
            const path = window.location.pathname;
            let pageId = path.substring(path.lastIndexOf('/') + 1).replace(/-[a-z]{2}\.html/i, '').replace('.html', '').toLowerCase();
            if (pageId === '') pageId = 'index';

            // 3. üî• CHIAMATA CORRETTA: Chiamiamo redirectToPage() definita in main.js
            // che ora sapr√† come costruire l'URL e reindirizzare.
            redirectToPage(pageId, langCode);
        }
    </script>
</head>

<body id="pugliole">
    <header class="main-header">

        <button class="menu-toggle" aria-label="Toggle menu">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>

        <nav class="nav-bar nav-list">
            <ul class="nav-links">
                <li><a id="navHome" href="index-it.html">Home</a></li>
                <li><a id="navPugliole" href="pugliole-it.html">Pugliole</a></li>
                <li><a id="navLastre" href="lastre-it.html">Lastre</a></li>
                <li><a id="navCarracci" href="carracci-it.html">Carracci</a></li>
            </ul>
        </nav>

        <div class="language-selector">
            <button onclick="setLanguage('it')"><img src="public/flag/it.png" alt="Italiano"></button>
            <button onclick="setLanguage('en')"><img src="public/flag/en.png" alt="English"></button>
            <button onclick="setLanguage('fr')"><img src="public/flag/fr.png" alt="Fran√ßais"></button>
            <button onclick="setLanguage('es')"><img src="public/flag/es.png" alt="Espa√±ol"></button>
        </div>
    </header>


    <main class="content-body">
        <div class="header-image-container">
            <img id="headerImage" src="public\images\viaPolese.jpg" alt="Via Polese">
            <h1 class="header-title" id="pageTitle">... le Pugliole a Bologna</h1>
        </div>
        <p id="mainText"></p>
        <p id="mainText1"></p>
        <p id="mainText2"></p>
        <p id="mainText3"></p>
        <p id="mainText4"></p>
        <p id="mainText5"></p>

        <img id="pageImage1" src="" style="display:none;">
        <img id="pageImage2" src="" style="display:none;">
        <img id="pageImage3" src="" style="display:none;">
        <img id="pageImage4" src="" style="display:none;">
        <img id="pageImage5" src="" style="display:none;">

        <button id="playAudio" class="play-style">Ascolta l'audio!</button>
        <audio id="audioPlayer"></audio>

        <div class="info-footer">
            <p><span id="infoSource"></span></p>
            <p>Data Creazione: <span id="infoCreatedDate"></span></p>
            <p>Ultimo Aggiornamento: <span id="infoUpdatedDate"></span></p>
        </div>
    </main>

    <button id="show-contextual-menu" style="display: none;">
        POI Trovati Nelle Vicinanze (GPS)
    </button>

    <div id="contextual-menu-container" class="contextual-nav">
        <ul>
        </ul>
    </div>

    <script src="public/main.js"></script>
</body>

</html>